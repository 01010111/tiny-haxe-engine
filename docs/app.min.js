!function(t){"use strict";function s(){}s.init=function(){window.document.onkeydown=function(t){s.k.h[t.keyCode]=!0},window.document.onkeyup=function(t){s.k.h[t.keyCode]=!1},p.ctx.canvas.onpointerdown=function(t){s.k.h[-1-t.button]=!0},p.ctx.canvas.onpointerup=function(t){s.k.h[-1-t.button]=!1},p.ctx.canvas.ontouchstart=function(t){s.k.h[-1]=!0},p.ctx.canvas.ontouchend=function(t){s.k.h[-1]=!1},p.ctx.canvas.onpointermove=function(t){return s.M={x:Math.floor(t.offsetX/p.zx),y:Math.floor(t.offsetY/p.zy)}},p.ctx.canvas.ontouchmove=function(t){window.console.log(t);var n=t.touches.item(0);return s.M={x:Math.floor(n.clientX/p.zx),y:Math.floor(n.clientY/p.zy)}}},s.p=function(t){return!!s.k.h.hasOwnProperty(t)&&s.k.h[t]},s.jp=function(t){if(!s.k.h.hasOwnProperty(t))return!1;if(!s.l.h.hasOwnProperty(t))return s.l.h[t]=s.k.h[t],s.k.h[t];var n=s.l.h[t]!=s.k.h[t]&&s.k.h[t];return s.l.h[t]=s.k.h[t],n};function a(){}a.c=function(t,n,o,e,r,i){return a.ls(t,n,i),t.arc(o,e,r,0,2*Math.PI),t.stroke(),t},a.fr=function(t,n,o,e,r,i){return t.fillStyle=n,t.fillRect(o,e,r,i),t},a.spr=function(t,n,o,e,r,i){r=(null!=r?r:1)*c.fw,i=(null!=i?i:1)*c.fh,t.drawImage(c.s,n%c.col*c.fw,Math.floor(n/c.col)*c.fh,r,i,Math.round(o),Math.round(e),r,i)},a.ls=function(t,n,o){return t.lineWidth=null!=o?o:1,t.strokeStyle=n,t.beginPath(),t};var p=t.Game=function(){};p.init=function(t,n,o){window.document.oncontextmenu=function(t){return t.preventDefault()};var e=window.document.createElement("canvas"),r=window.document.getElementById(t);r.appendChild(e),p.w=e.width=n,p.h=e.height=o,p.ctx=e.getContext("2d",null),s.init(),window.onresize=function(t){return p.zx=r.offsetWidth/n,p.zy=r.offsetHeight/o},window.onresize(),window.requestAnimationFrame(p.loop),i.main()},p.loop=function(t){p.s.update(),p.s.draw(),window.requestAnimationFrame(p.loop)};function w(){}w.remove=function(t,n){var o=t.indexOf(n);return-1!=o&&(t.splice(o,1),!0)};var i=function(){};i.main=function(){p.s=new n};var n=function(){this.p=[],c.load("s.png",8,8,4)};n.prototype={update:function(){for(var t,n=0,o=this.p;n<o.length;){var e=o[n];++n,(e.x+10>p.w&&0<e.dx||e.x<0&&e.dx<0)&&(e.dx*=-1),(e.y+10>p.h&&0<e.dy||e.y<0&&e.dy<0)&&(e.dy*=-1)}if(s.p(-1)&&(this.p.push({id:this.p.length%4,x:s.M.x-4,y:s.M.y-4,dx:Math.random()-.5,dy:Math.random()-.5}),v.bz(10)),s.p(-3))for(var r=0,i=this.p;r<i.length;){var a=i[r];++r,Math.abs(a.x-s.M.x)<8&&Math.abs(a.y-s.M.y)<8&&w.remove(this.p,a)}if(s.p(88))for(var c=0,u=this.p;c<u.length;){var f=u[c];++c,f.dx*=.9,f.dy*=.9}if(s.jp(67))for(var d=0,h=this.p;d<h.length;){var l=h[d];++d,l.dx=Math.random()-.5,l.dy=Math.random()-.5}s.jp(83)&&y.s("test",{p:this.p}),s.jp(76)&&(t=y.l("test"),this.p=null==t?[]:t.p)},draw:function(){a.fr(p.ctx,"black",0,0,p.w,p.h),s.p(-3)&&a.c(p.ctx,"red",s.M.x,s.M.y,8,4);for(var t=0,n=this.p;t<n.length;){var o=n[t];++t,a.spr(p.ctx,o.id,o.x+=o.dx,o.y+=o.dy,1,1)}}};var y=function(){};y.s=function(t,n){return null!=r.getLocalStorage()&&(r.getLocalStorage().setItem(t,JSON.stringify(n)),!0)},y.l=function(t){return null==r.getLocalStorage()?null:JSON.parse(r.getLocalStorage().getItem(t))};var c=function(){};c.load=function(t,n,o,e){var r=window.document.createElement("div");r.style.display="none",window.document.body.appendChild(r),c.s=window.document.createElement("img"),c.s.src=t,r.appendChild(c.s),c.fw=n,c.fh=o,c.col=e};var v=function(){};v.bz=function(t){try{window.navigator.vibrate(t)}catch(t){}};function o(){this.h={}}var e=function(){};e.__super__=Error,e.prototype=function(t,n){var o=Object.create(t);for(var e in n)o[e]=n[e];return n.toString!==Object.prototype.toString&&(o.toString=n.toString),o}(Error.prototype,{});var r=function(){};r.getLocalStorage=function(){try{var t,n=window.localStorage;return n.getItem(""),0==n.length&&(t="_hx_"+Math.random(),n.setItem(t,t),n.removeItem(t)),n}catch(t){return null}},Object.defineProperty(e.prototype,"message",{get:function(){return String(this.val)}}),s.M={x:0,y:0},s.k=new o,s.l=new o}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this);