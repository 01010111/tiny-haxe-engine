!function(n){"use strict";function s(){}s.init=function(){window.document.addEventListener("keydown",function(n){s.k.h[n.keyCode]=!0}),window.document.addEventListener("keyup",function(n){s.k.h[n.keyCode]=!1}),p.ctx.canvas.onpointerdown=function(n){s.k.h[-1-n.button]=!0},p.ctx.canvas.onpointerup=function(n){s.k.h[-1-n.button]=!1},p.ctx.canvas.onpointermove=function(n){return s.M={x:Math.floor(n.offsetX/p.zx),y:Math.floor(n.offsetY/p.zy)}}},s.p=function(n){return!!s.k.h.hasOwnProperty(n)&&s.k.h[n]},s.jp=function(n){if(!s.k.h.hasOwnProperty(n))return!1;if(!s.l.h.hasOwnProperty(n))return s.l.h[n]=s.k.h[n],s.k.h[n];var t=s.l.h[n]!=s.k.h[n]&&s.k.h[n];return s.l.h[n]=s.k.h[n],t};function a(){}a.c=function(n,t,e,o,r,i){return a.ls(n,t,i),n.arc(e,o,r,0,2*Math.PI),n.stroke(),n},a.fr=function(n,t,e,o,r,i){return n.fillStyle=t,n.fillRect(e,o,r,i),n},a.spr=function(n,t,e,o,r,i){r=(null!=r?r:1)*d.fw,i=(null!=i?i:1)*d.fh,n.drawImage(d.s,t%d.col*d.fw,Math.floor(t/d.col)*d.fh,r,i,Math.round(e),Math.round(o),r,i)},a.ls=function(n,t,e){return n.lineWidth=null!=e?e:1,n.strokeStyle=t,n.beginPath(),n};var p=n.Game=function(){};p.init=function(n,t,e){window.document.addEventListener("contextmenu",function(n){return n.preventDefault()});var o=window.document.createElement("canvas"),r=window.document.getElementById(n);r.appendChild(o),p.w=o.width=t,p.h=o.height=e,p.ctx=o.getContext("2d",null),s.init(),window.onresize=function(n){return p.zx=r.offsetWidth/t,p.zy=r.offsetHeight/e},window.onresize(),window.requestAnimationFrame(p.loop),i.main()},p.loop=function(n){p.s.update(),p.s.draw(),window.requestAnimationFrame(p.loop)};function w(){}w.remove=function(n,t){var e=n.indexOf(t);return-1!=e&&(n.splice(e,1),!0)};var i=function(){};i.main=function(){p.s=new t};var t=function(){this.p=[],d.load("s.png",8,8,4)};t.prototype={update:function(){for(var n,t=0,e=this.p;t<e.length;){var o=e[t];++t,(o.x+10>p.w&&0<o.dx||o.x<0&&o.dx<0)&&(o.dx*=-1),(o.y+10>p.h&&0<o.dy||o.y<0&&o.dy<0)&&(o.dy*=-1)}if(s.p(-1)&&this.p.push({id:this.p.length%4,x:s.M.x-4,y:s.M.y-4,dx:Math.random()-.5,dy:Math.random()-.5}),s.p(-3))for(var r=0,i=this.p;r<i.length;){var a=i[r];++r,Math.abs(a.x-s.M.x)<8&&Math.abs(a.y-s.M.y)<8&&w.remove(this.p,a)}if(s.p(88))for(var d=0,u=this.p;d<u.length;){var c=u[d];++d,c.dx*=.9,c.dy*=.9}if(s.jp(67))for(var f=0,l=this.p;f<l.length;){var h=l[f];++f,h.dx=Math.random()-.5,h.dy=Math.random()-.5}s.jp(83)&&y.s("test",{p:this.p}),s.jp(76)&&(n=y.l("test"),this.p=null==n?[]:n.p),s.jp(32)&&v.bz(10)},draw:function(){a.fr(p.ctx,"black",0,0,p.w,p.h),s.p(-3)&&a.c(p.ctx,"red",s.M.x,s.M.y,8,4);for(var n=0,t=this.p;n<t.length;){var e=t[n];++n,a.spr(p.ctx,e.id,e.x+=e.dx,e.y+=e.dy,1,1)}}};var y=function(){};y.s=function(n,t){return null!=o.getLocalStorage()&&(o.getLocalStorage().setItem(n,JSON.stringify(t)),!0)},y.l=function(n){return null==o.getLocalStorage()?null:JSON.parse(o.getLocalStorage().getItem(n))};var d=function(){};d.load=function(n,t,e,o){var r=window.document.createElement("div");r.style.display="none",window.document.body.appendChild(r),d.s=window.document.createElement("img"),d.s.src=n,r.appendChild(d.s),d.fw=t,d.fh=e,d.col=o};var v=function(){};v.bz=function(n){window.navigator.vibrate(n)};function e(){this.h={}}var o=function(){};o.getLocalStorage=function(){try{var n,t=window.localStorage;return t.getItem(""),0==t.length&&(n="_hx_"+Math.random(),t.setItem(n,n),t.removeItem(n)),t}catch(n){return null}},s.M={x:0,y:0},s.k=new e,s.l=new e}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this);