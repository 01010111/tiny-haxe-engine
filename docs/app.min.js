!function(t){"use strict";function d(){}d.init=function(){window.document.onkeydown=function(t){d.k.h[t.keyCode]=!0},window.document.onkeyup=function(t){d.k.h[t.keyCode]=!1},p.ctx.canvas.onpointerdown=function(t){d.k.h[-1-t.button]=!0},p.ctx.canvas.onpointerup=function(t){d.k.h[-1-t.button]=!1},p.ctx.canvas.onpointermove=function(t){return d.M={x:Math.floor(t.offsetX/p.zx),y:Math.floor(t.offsetY/p.zy)}},p.ctx.canvas.ontouchstart=function(t){d.k.h[-1]=!0},p.ctx.canvas.ontouchend=function(t){d.k.h[-1]=!1},p.ctx.canvas.ontouchmove=function(t){return d.M={x:Math.floor(t.touches.item(0).clientX/p.zx),y:Math.floor(t.touches.item(0).clientY/p.zy)}}},d.p=function(t){return!!d.k.h.hasOwnProperty(t)&&d.k.h[t]},d.jp=function(t){if(!d.k.h.hasOwnProperty(t))return!1;if(!d.l.h.hasOwnProperty(t))return d.l.h[t]=d.k.h[t],d.k.h[t];var n=d.l.h[t]!=d.k.h[t]&&d.k.h[t];return d.l.h[t]=d.k.h[t],n};function r(){}r.clr=function(t){null!=t?r.frect(t,0,0,p.w,p.h):p.ctx.clearRect(0,0,p.w,p.h)},r.circ=function(t,n,e,o,i){r.ls(t,i),p.ctx.arc(n,e,o,0,2*Math.PI),p.ctx.stroke()},r.frect=function(t,n,e,o,i){p.ctx.fillStyle=t,p.ctx.fillRect(n,e,o,i)},r.ls=function(t,n){return p.ctx.lineWidth=null!=n?n:1,p.ctx.strokeStyle=t,p.ctx.beginPath(),p.ctx},r.spr=function(t,n,e,o){o={a:null!=o&&null!=o.a?o.a:1,sx:null!=o&&null!=o.sx?o.sx:1,sy:null!=o&&null!=o.sy?o.sy:1,r:null!=o&&null!=o.r?o.r:1};var i=u.get(o.sx,0),r=u.get(0,o.sy),a=u.get(e.w/2,e.h/2);i.set_a(i.get_a()+o.r),r.set_a(r.get_a()+o.r),p.ctx.save(),p.ctx.transform(i.x,r.x,i.y,r.y,t,n),p.ctx.transform(1,0,0,1,-a.x,-a.y),p.ctx.globalAlpha=o.a,p.ctx.drawImage(c.m.h[e.id],e.ox,e.oy,e.w,e.h,0,0,e.w,e.h),p.ctx.restore(),i.put(),r.put(),a.put()},r.atl=function(t,n,e,o){r.spr(n,e,c.atl.h[t],o)};var p=t.Game=function(){};p.init=function(t,n,e){window.document.oncontextmenu=function(t){return t.preventDefault()};var o=window.document.createElement("canvas"),i=window.document.getElementById(t);i.appendChild(o),p.w=o.width=n,p.h=o.height=e,p.ctx=o.getContext("2d",null),d.init(),window.onresize=function(t){return p.zx=i.offsetWidth/n,p.zy=i.offsetHeight/e},window.onresize(),window.requestAnimationFrame(p.loop),a.main()},p.loop=function(t){p.t=t,p.s.update(),p.s.draw(),window.requestAnimationFrame(p.loop)};var a=function(){};a.main=function(){p.s=new n};var n=function(){this.p=[],c.l("s.png",0),c.a(0,0,0,0,8,8),c.a(1,0,8,0,8,8),c.a(2,0,16,0,8,8),c.a(3,0,24,0,8,8)};n.prototype={update:function(){for(var t,n=0,e=this.p;n<e.length;){var o=e[n];++n,o.x+=o.dx,o.y+=o.dy,(o.x+10>p.w&&0<o.dx||o.x<0&&o.dx<0)&&(o.dx*=-1),(o.y+10>p.h&&0<o.dy||o.y<0&&o.dy<0)&&(o.dy*=-1)}if(d.jp(-1)&&this.p.push({id:this.p.length%4,x:d.M.x,y:d.M.y,dx:Math.random()-.5,dy:Math.random()-.5,s:1,r:0,a:Math.random()}),d.p(-3))for(var i=0,r=this.p;i<r.length;){var a=r[i];++i,Math.abs(a.x-d.M.x)<8&&Math.abs(a.y-d.M.y)<8&&this.p.splice(this.p.indexOf(a),1)}if(d.p(88))for(var c=0,u=this.p;c<u.length;){var h=u[c];++c,h.dx*=.9,h.dy*=.9}if(d.jp(67))for(var s=0,l=this.p;s<l.length;){var f=l[s];++s,f.dx=Math.random()-.5,f.dy=Math.random()-.5}d.jp(83)&&x.s("test",{p:this.p}),d.jp(76)&&(t=x.l("test"),this.p=null==t?[]:t.p)},draw:function(){r.clr("black"),d.p(-3)&&r.circ("red",d.M.x,d.M.y,8,4);for(var t=0,n=this.p;t<n.length;){var e=n[t];++t,e.s+=Math.sin(p.t/1e3)/10,e.r+=.1,r.atl(e.id,Math.round(e.x),Math.round(e.y),{a:e.a,sx:e.s,sy:e.s,r:e.r})}}};var x=function(){};x.s=function(t,n){return null!=o.getLocalStorage()&&(o.getLocalStorage().setItem(t,JSON.stringify(n)),!0)},x.l=function(t){return null==o.getLocalStorage()?null:JSON.parse(o.getLocalStorage().getItem(t))};var c=function(){};c.l=function(t,n){var e=window.document.createElement("div");e.style.display="none",window.document.body.appendChild(e);var o=window.document.createElement("img");o.src=t,e.appendChild(o),c.m.h[n]=o},c.a=function(t,n,e,o,i,r){c.atl.h[t]={id:n,ox:e,oy:o,w:i,h:r}};var u=function(){};u.get=function(t,n){return 0<u.p.length?u.p.shift().set(t,n):(new u).set(t,n)},u.prototype={get_l:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},get_a:function(){return Math.atan2(this.y,this.x)},set_a:function(t){return this.set(this.get_l()*Math.cos(t),this.get_l()*Math.sin(t)),t},set:function(t,n){return this.x=t,this.y=n,this},put:function(){u.p.push(this)}};function e(){this.h={}}var o=function(){};o.getLocalStorage=function(){try{var t,n=window.localStorage;return n.getItem(""),0==n.length&&(t="_hx_"+Math.random(),n.setItem(t,t),n.removeItem(t)),n}catch(t){return null}},d.M={x:0,y:0},d.k=new e,d.l=new e,c.m=new e,c.atl=new e,u.p=[]}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this);