!function(n){"use strict";function s(){}s.init=function(){window.document.onkeydown=function(n){s.k.h[n.keyCode]=!0},window.document.onkeyup=function(n){s.k.h[n.keyCode]=!1},p.ctx.canvas.onpointerdown=function(n){s.k.h[-1-n.button]=!0},p.ctx.canvas.onpointerup=function(n){s.k.h[-1-n.button]=!1},p.ctx.canvas.ontouchstart=function(n){s.k.h[-1]=!0},p.ctx.canvas.ontouchend=function(n){s.k.h[-1]=!1},p.ctx.canvas.onpointermove=function(n){return s.M={x:Math.floor(n.offsetX/p.zx),y:Math.floor(n.offsetY/p.zy)}},p.ctx.canvas.ontouchmove=function(n){return s.M={x:Math.floor(n.touches.item(0).clientX/p.zx),y:Math.floor(n.touches.item(0).clientY/p.zy)}}},s.p=function(n){return!!s.k.h.hasOwnProperty(n)&&s.k.h[n]},s.jp=function(n){if(!s.k.h.hasOwnProperty(n))return!1;if(!s.l.h.hasOwnProperty(n))return s.l.h[n]=s.k.h[n],s.k.h[n];var t=s.l.h[n]!=s.k.h[n]&&s.k.h[n];return s.l.h[n]=s.k.h[n],t};function a(){}a.c=function(n,t,o,e,i,r){return a.ls(n,t,r),n.arc(o,e,i,0,2*Math.PI),n.stroke(),n},a.fr=function(n,t,o,e,i,r){return n.fillStyle=t,n.fillRect(o,e,i,r),n},a.spr=function(n,t,o,e,i,r){i=(null!=i?i:1)*c.fw,r=(null!=r?r:1)*c.fh,n.drawImage(c.s,t%c.col*c.fw,Math.floor(t/c.col)*c.fh,i,r,Math.round(o),Math.round(e),i,r)},a.ls=function(n,t,o){return n.lineWidth=null!=o?o:1,n.strokeStyle=t,n.beginPath(),n};var p=n.Game=function(){};p.init=function(n,t,o){window.document.oncontextmenu=function(n){return n.preventDefault()};var e=window.document.createElement("canvas"),i=window.document.getElementById(n);i.appendChild(e),p.w=e.width=t,p.h=e.height=o,p.ctx=e.getContext("2d",null),s.init(),window.onresize=function(n){return p.zx=i.offsetWidth/t,p.zy=i.offsetHeight/o},window.onresize(),window.requestAnimationFrame(p.loop),r.main()},p.loop=function(n){p.s.update(),p.s.draw(),window.requestAnimationFrame(p.loop)};function w(){}w.remove=function(n,t){var o=n.indexOf(t);return-1!=o&&(n.splice(o,1),!0)};var r=function(){};r.main=function(){p.s=new t};var t=function(){this.p=[],c.load("s.png",8,8,4)};t.prototype={update:function(){for(var n,t=0,o=this.p;t<o.length;){var e=o[t];++t,(e.x+10>p.w&&0<e.dx||e.x<0&&e.dx<0)&&(e.dx*=-1),(e.y+10>p.h&&0<e.dy||e.y<0&&e.dy<0)&&(e.dy*=-1)}if(s.p(-1)&&(this.p.push({id:this.p.length%4,x:s.M.x-4,y:s.M.y-4,dx:Math.random()-.5,dy:Math.random()-.5}),m.bz(10)),s.p(-3))for(var i=0,r=this.p;i<r.length;){var a=r[i];++i,Math.abs(a.x-s.M.x)<8&&Math.abs(a.y-s.M.y)<8&&w.remove(this.p,a)}if(s.p(88))for(var c=0,u=this.p;c<u.length;){var f=u[c];++c,f.dx*=.9,f.dy*=.9}if(s.jp(67))for(var d=0,h=this.p;d<h.length;){var l=h[d];++d,l.dx=Math.random()-.5,l.dy=Math.random()-.5}s.jp(83)&&y.s("test",{p:this.p}),s.jp(76)&&(n=y.l("test"),this.p=null==n?[]:n.p)},draw:function(){a.fr(p.ctx,"black",0,0,p.w,p.h),s.p(-3)&&a.c(p.ctx,"red",s.M.x,s.M.y,8,4);for(var n=0,t=this.p;n<t.length;){var o=t[n];++n,a.spr(p.ctx,o.id,o.x+=o.dx,o.y+=o.dy,1,1)}}};var y=function(){};y.s=function(n,t){return null!=e.getLocalStorage()&&(e.getLocalStorage().setItem(n,JSON.stringify(t)),!0)},y.l=function(n){return null==e.getLocalStorage()?null:JSON.parse(e.getLocalStorage().getItem(n))};var c=function(){};c.load=function(n,t,o,e){var i=window.document.createElement("div");i.style.display="none",window.document.body.appendChild(i),c.s=window.document.createElement("img"),c.s.src=n,i.appendChild(c.s),c.fw=t,c.fh=o,c.col=e};var m=function(){};m.bz=function(n){window.navigator.vibrate(n)};function o(){this.h={}}var e=function(){};e.getLocalStorage=function(){try{var n,t=window.localStorage;return t.getItem(""),0==t.length&&(n="_hx_"+Math.random(),t.setItem(n,n),t.removeItem(n)),t}catch(n){return null}},s.M={x:0,y:0},s.k=new o,s.l=new o}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this);