!function(t){"use strict";function s(){}s.init=function(){window.document.onkeydown=function(t){s.k.h[t.keyCode]=!0},window.document.onkeyup=function(t){s.k.h[t.keyCode]=!1},p.ctx.canvas.onpointerdown=function(t){s.k.h[-1-t.button]=!0},p.ctx.canvas.onpointerup=function(t){s.k.h[-1-t.button]=!1},p.ctx.canvas.onpointermove=function(t){return s.M={x:Math.floor(t.offsetX/p.zx),y:Math.floor(t.offsetY/p.zy)}},p.ctx.canvas.ontouchstart=function(t){s.k.h[-1]=!0},p.ctx.canvas.ontouchend=function(t){s.k.h[-1]=!1},p.ctx.canvas.ontouchmove=function(t){return s.M={x:Math.floor(t.touches.item(0).clientX/p.zx),y:Math.floor(t.touches.item(0).clientY/p.zy)}}},s.p=function(t){return!!s.k.h.hasOwnProperty(t)&&s.k.h[t]},s.jp=function(t){if(!s.k.h.hasOwnProperty(t))return!1;if(!s.l.h.hasOwnProperty(t))return s.l.h[t]=s.k.h[t],s.k.h[t];var n=s.l.h[t]!=s.k.h[t]&&s.k.h[t];return s.l.h[t]=s.k.h[t],n};function r(){}r.clr=function(t){null!=t?r.frect(t,0,0,p.w,p.h):p.ctx.clearRect(0,0,p.w,p.h)},r.circ=function(t,n,e,o,i){r.ls(t,i),p.ctx.arc(n,e,o,0,2*Math.PI),p.ctx.stroke()},r.frect=function(t,n,e,o,i){p.ctx.fillStyle=t,p.ctx.fillRect(n,e,o,i)},r.ls=function(t,n){return p.ctx.lineWidth=null!=n?n:1,p.ctx.strokeStyle=t,p.ctx.beginPath(),p.ctx},r.atl=function(t,n,e){var o=c.atl.h[t];p.ctx.drawImage(c.m.h[o.id],o.ox,o.oy,o.w,o.h,n,e,o.w,o.h)};var p=t.Game=function(){};p.init=function(t,n,e){window.document.oncontextmenu=function(t){return t.preventDefault()};var o=window.document.createElement("canvas"),i=window.document.getElementById(t);i.appendChild(o),p.w=o.width=n,p.h=o.height=e,p.ctx=o.getContext("2d",null),s.init(),window.onresize=function(t){return p.zx=i.offsetWidth/n,p.zy=i.offsetHeight/e},window.onresize(),window.requestAnimationFrame(p.loop),a.main()},p.loop=function(t){p.t=t,p.s.update(),p.s.draw(),window.requestAnimationFrame(p.loop)};function w(){}w.remove=function(t,n){var e=t.indexOf(n);return-1!=e&&(t.splice(e,1),!0)};var a=function(){};a.main=function(){p.s=new n};var n=function(){this.p=[],c.l("s.png",0),c.a(0,0,0,0,8,8),c.a(1,0,8,0,8,8),c.a(2,0,16,0,8,8),c.a(3,0,24,0,8,8)};n.prototype={update:function(){for(var t,n=0,e=this.p;n<e.length;){var o=e[n];++n,o.x+=o.dx,o.y+=o.dy,(o.x+10>p.w&&0<o.dx||o.x<0&&o.dx<0)&&(o.dx*=-1),(o.y+10>p.h&&0<o.dy||o.y<0&&o.dy<0)&&(o.dy*=-1)}if(s.p(-1)&&this.p.push({id:this.p.length%4,x:s.M.x-4,y:s.M.y-4,dx:Math.random()-.5,dy:Math.random()-.5}),s.p(-3))for(var i=0,r=this.p;i<r.length;){var a=r[i];++i,Math.abs(a.x-s.M.x)<8&&Math.abs(a.y-s.M.y)<8&&w.remove(this.p,a)}if(s.p(88))for(var c=0,u=this.p;c<u.length;){var h=u[c];++c,h.dx*=.9,h.dy*=.9}if(s.jp(67))for(var d=0,l=this.p;d<l.length;){var f=l[d];++d,f.dx=Math.random()-.5,f.dy=Math.random()-.5}s.jp(83)&&x.s("test",{p:this.p}),s.jp(76)&&(t=x.l("test"),this.p=null==t?[]:t.p)},draw:function(){r.clr("black"),s.p(-3)&&r.circ("red",s.M.x,s.M.y,8,4);for(var t=0,n=this.p;t<n.length;){var e=n[t];++t,r.atl(e.id,Math.round(e.x),Math.round(e.y))}}};var x=function(){};x.s=function(t,n){return null!=o.getLocalStorage()&&(o.getLocalStorage().setItem(t,JSON.stringify(n)),!0)},x.l=function(t){return null==o.getLocalStorage()?null:JSON.parse(o.getLocalStorage().getItem(t))};var c=function(){};c.l=function(t,n){var e=window.document.createElement("div");e.style.display="none",window.document.body.appendChild(e);var o=window.document.createElement("img");o.src=t,e.appendChild(o),c.m.h[n]=o},c.a=function(t,n,e,o,i,r){c.atl.h[t]={id:n,ox:e,oy:o,w:i,h:r}};function e(){this.h={}}var o=function(){};o.getLocalStorage=function(){try{var t,n=window.localStorage;return n.getItem(""),0==n.length&&(t="_hx_"+Math.random(),n.setItem(t,t),n.removeItem(t)),n}catch(t){return null}},s.M={x:0,y:0},s.k=new e,s.l=new e,c.m=new e,c.atl=new e}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this);