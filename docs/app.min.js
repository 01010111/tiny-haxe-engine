!function(n){"use strict";function l(){}l.init=function(){window.document.onkeydown=function(n){l.k.h[n.keyCode]=!0},window.document.onkeyup=function(n){l.k.h[n.keyCode]=!1},s.ctx.canvas.onpointerdown=function(n){l.k.h[-1-n.button]=!0},s.ctx.canvas.onpointerup=function(n){l.k.h[-1-n.button]=!1},s.ctx.canvas.onpointermove=function(n){return l.M={x:Math.floor(n.offsetX/s.zx),y:Math.floor(n.offsetY/s.zy)}},s.ctx.canvas.ontouchstart=function(n){l.k.h[-1]=!0},s.ctx.canvas.ontouchend=function(n){l.k.h[-1]=!1},s.ctx.canvas.ontouchmove=function(n){return l.M={x:Math.floor(n.touches.item(0).clientX/s.zx),y:Math.floor(n.touches.item(0).clientY/s.zy)}}},l.p=function(n){return!!l.k.h.hasOwnProperty(n)&&l.k.h[n]},l.jp=function(n){if(!l.k.h.hasOwnProperty(n))return!1;if(!l.l.h.hasOwnProperty(n))return l.l.h[n]=l.k.h[n],l.k.h[n];var t=l.l.h[n]!=l.k.h[n]&&l.k.h[n];return l.l.h[n]=l.k.h[n],t};function c(){}c.clr=function(n){null!=n?c.frect(n,0,0,s.w,s.h):s.ctx.clearRect(0,0,s.w,s.h)},c.circ=function(n,t,o,e,i){c.ls(n,i),s.ctx.arc(t,o,e,0,2*Math.PI),s.ctx.stroke()},c.frect=function(n,t,o,e,i){s.ctx.fillStyle=n,s.ctx.fillRect(t,o,e,i)},c.ls=function(n,t){return s.ctx.lineWidth=null!=t?t:1,s.ctx.strokeStyle=n,s.ctx.beginPath(),s.ctx},c.atl=function(n,t,o){var e=r.atl.h[n];s.ctx.drawImage(r.m.h[e.id],e.ox,e.oy,e.w,e.h,t,o,e.w,e.h)};var s=n.Game=function(){};s.init=function(n,t,o){window.document.oncontextmenu=function(n){return n.preventDefault()};var e=window.document.createElement("canvas"),i=window.document.getElementById(n);i.appendChild(e),s.w=e.width=t,s.h=e.height=o,s.ctx=e.getContext("2d",null),l.init(),window.onresize=function(n){return s.zx=i.offsetWidth/t,s.zy=i.offsetHeight/o},window.onresize(),window.requestAnimationFrame(s.loop),a.main()},s.loop=function(n){s.t=n,s.s.update(),s.s.draw(),window.requestAnimationFrame(s.loop)};var a=function(){};a.main=function(){s.s=new t};var t=function(){this.p=[],r.l("s.png",0),r.a(0,0,0,0,8,8),r.a(1,0,8,0,8,8),r.a(2,0,16,0,8,8),r.a(3,0,24,0,8,8)};t.prototype={update:function(){for(var n=0,t=this.p;n<t.length;){var o=t[n];++n,o.x+=o.dx,o.y+=o.dy,(o.x+10>s.w&&0<o.dx||o.x<0&&o.dx<0)&&(o.dx*=-1),(o.y+10>s.h&&0<o.dy||o.y<0&&o.dy<0)&&(o.dy*=-1)}if(l.p(-1)&&this.p.push({id:this.p.length%4,x:l.M.x-4,y:l.M.y-4,dx:Math.random()-.5,dy:Math.random()-.5}),l.p(-3))for(var e=0,i=this.p;e<i.length;){var c=i[e];++e,Math.abs(c.x-l.M.x)<8&&Math.abs(c.y-l.M.y)<8&&this.p.splice(this.p.indexOf(c),1)}if(l.p(88))for(var a=0,r=this.p;a<r.length;){var h=r[a];++a,h.dx*=.9,h.dy*=.9}if(l.jp(67))for(var d=0,u=this.p;d<u.length;){var f=u[d];++d,f.dx=Math.random()-.5,f.dy=Math.random()-.5}},draw:function(){c.clr("black"),l.p(-3)&&c.circ("red",l.M.x,l.M.y,8,4);for(var n=0,t=this.p;n<t.length;){var o=t[n];++n,c.atl(o.id,Math.round(o.x),Math.round(o.y))}}};var r=function(){};r.l=function(n,t){var o=window.document.createElement("div");o.style.display="none",window.document.body.appendChild(o);var e=window.document.createElement("img");e.src=n,o.appendChild(e),r.m.h[t]=e},r.a=function(n,t,o,e,i,c){r.atl.h[n]={id:t,ox:o,oy:e,w:i,h:c}};function o(){this.h={}}l.M={x:0,y:0},l.k=new o,l.l=new o,r.m=new o,r.atl=new o}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this);